# Rest API
Rest API service rapresent the backend of the solution. It is used by FE web/mobile application in order to get/store data and start/stop realtime/batch processes.
*[TODO: list endpoints with related meaning]*

## Service versioning
REST API service versioning follows well defined rules and conventions:
- Each version is composed by three digits : *X.Y.Z*
  - **X** : main service version. <br>
    It identifies a set of features implemented by service. When features change, main version will change.
  - **Y** : intermediate service version. <br>
    All features being equal, it identifies changes/updates about implementation aspects
  - **Z** : bug fixing service version. <br>
    It keep track of all changes need to fix bugs/aspects raised by customer or tests (manual or automatic)
- Base path of API URL contains version identifier: i.e. `{base path}/vX.Y.Z/{path}`

## Implementation
Rest API service is implemented by using [Spring Boot](https://spring.io/projects/spring-boot#overview) framework. 
Next step will be to implement HATEOAS paradigm, by using [Spring HATEOAS](https://spring.io/projects/spring-hateoas).

Goal is to develop REST API by following the API-first approach. This means that controller skeletons are automatically created starting from Open API specs using Maven [openapi-generator-maven-plugin](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin) (more [info-1](https://reflectoring.io/spring-boot-openapi/), [info-2](https://binarymindset.com/api-first-development-with-springboot-and-openapi/)).

Spring Boot application is structured as a multi-module application (more [info](https://spring.io/guides/gs/multi-module/)):
- app module, containing whole applicative code. It is generated by using [spring initializr](https://start.spring.io/) online tool (more [info](https://spring.io/guides/gs/rest-service/))
- specs module, implementing OpenAPI Maven plugin

Open API specs file placed within `./code/{x.y.z}/specs/src/main/resources/main_api.yml` is a copy of file placed within `../open-api-specs/{x.y.z}/main_api_integrated.yml`. <br>
:warning: **Note**: when specs file is updated, should be copied into spring app folder and then re-aligned with new changes *[TODO: explain more in details]* 

## OpenAPI Integrator
OpenAPI integrator is a Node script ables to integrate an OpenAPI specs yaml file referrencing separated JSON schema files (as component data model) in single YAML file embedding data specifications.

It accepts version of OpenAPI specs as input and produce integrated YAML file as output.
How use:
- Start execution script: `node ./open-api-integrator/index.js 0.1.0`
- Script reads content of `./open-api-specs/0.1.0/` folder
- Script integrates files in a single YAML file
- `./open-api-specs/0.1.0/main_api_integrated.yml` file is created


References:
- https://openapi.tools/
